<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Vanilla JS fantasy</title>
<style type="text/css">
body {background: black;}		
</style>
</head>

<body>

<script type="text/javascript">

//Ecwid.OnAPILoaded.add(function() {

//	Ecwid.Cart.clear();
	
	const img_src = 'http://pngimg.com/uploads/hummer/hummer_PNG12193.png';
	const products = {
		engine: 333999307,
		wheels: 333999308,
		system: 348579009,
		transm: 333999309,
		hull: 333999310,
	};

	const div = document.createElement('div');
	div.setAttribute('id', 'qatask2');
	Object.assign(div.style, {
		position : 'fixed',
		top : '50%',
		left : '50%',
	});

	const img = document.createElement('img');
	img.setAttribute('src', img_src);
	img.setAttribute('draggable', 'false');
	Object.assign(img.style, {
		position : 'absolute',
		top : '-165px',
		left : '-325px',
		border : '2px dashed rgba(13,14,164,0.35)',
	});	
/*
	let quant = 0;

	Ecwid.OnCartChanged.add((c) => quant = c.productsQuantity);
	
	const addCart = (item) => Ecwid.Cart.addProduct(products[item]);
*/
	img.addEventListener("click", (e) => {
		//if (quant >= 5) final();
		const x = e.layerX;
		const y = e.layerY;
		/*
		( (x < 170 || x > 450) && y > 200 )
			? addCart('wheels')
			: ( x < 180 && (y < 180 && y > 130) )
				? addCart('engine')
				: ( x > 190 && (y < 190 && y > 55) )
					? addCart('hull')
					: ( (x > 190 && x < 440) && (y > 200 && y < 300) )
						? addCart('transm')
						: ( (x > 200 && x < 570) && y < 50 )
							? addCart('system')
							: null;
		*/
		decal(x-325, y-165, div);
	});

	function decal (x = 0, y = 0, targ = document.body) {
		let dot = document.createElement('div');
		Object.assign(dot.style, {
			width : '10px',
			height : '10px',
			border : '2px dashed #00FFF5',
			position : 'absolute',
			top : `${y-9}px`,
			left : `${x-8}px`,
			zIndex : '99',
		});

		targ.append(dot);
	};

	function final() {
		div.innerHTML = '<div style="margin-left: -10px; width:300px; padding:7px; display:block; border-radius: 10px; position: absolute; top: -50%; left: -152px; font-size: 24px; color: white; text-align: center; background-color: #8EC5FC;background-image: linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%);">Вы собрали автомобиль!</div>';
		setTimeout(() => document.querySelector('#qatask2').remove(), 2000)
	};

	div.append(img);
	document.body.append(div);
//});

</script>
</body>
</html>
